var Gauge = require('./gauge')
var consoleStrings = require('./console-strings')
var onExit = require('signal-exit')
var themes = require('./themes')

var gt = new Gauge(themes.newTheme(themes(true, true), {
//    activityIndicatorTheme: ['ðŸ• ', 'ðŸ•‘ ', 'ðŸ•’ ', 'ðŸ•“ ', 'ðŸ•” ', 'ðŸ•• ', 'ðŸ•– ', 'ðŸ•— ', 'ðŸ•˜ ','ðŸ•™ ', 'ðŸ•š ', 'ðŸ•› ']
  }),
  [
    {type: 'progressbar'},
    {type: 'activityIndicator', kerning: 1, length: 2},
    {type: 'section', kerning: 1, length: 8},
  ],
  80
)
var progress = 0
var spun = 0
setInterval(function () {
  process.stdout.write(gt.show({section:'progress', subsection:'interval', spun: ++spun, completed: progress}))
}, 50)
var int = setInterval(function () {
  process.stdout.write(gt.show({section:'progress', subsection: '', spun: spun, completed: progress += 0.025}))
  if (progress >= 1) return clearInterval(int)
}, 125)
process.stdout.write(gt.hideCursor() + gt.show({section:'xxx', subsection: ''}))

onExit(function () { process.stdout.write(gt.hide() + gt.showCursor()) })
